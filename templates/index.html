<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<link rel="stylesheet" media="all" href="static/main.css">
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="static/script.js?8"></script>

<title>Robot Control Panel</title>
</head>

<body onload="init();">

<div id="container">

<!-- Top Controls: Record Left, Pause Center, Shutdown Right -->
<div class="top-controls">
  <button id="record-btn" class="top-btn left">Start Recording</button>
  <button id="pause-btn" class="top-btn center">PAUSE</button>
  <a href="/halt" onClick="return shutdown()" class="top-btn right">Shutdown</a>
</div>

<!-- Arm Controls -->
<div class="control-section">
  
  <!-- Preset Positions -->
  <div class="preset-row">
    <button id="servo-home-btn" class="preset-btn">Home</button>
    <button id="servo-capture-btn" class="preset-btn">Capture</button>
    <button id="servo-grip-btn" class="preset-btn">Grip</button>
    <button id="servo-lift-btn" class="preset-btn">Lift</button>
    <button id="servo-park-btn" class="preset-btn">Park</button>
  </div>
  
  <!-- Manual Control Sliders -->
  <div class="servo-sliders">
    
    <!-- Lift Servo Slider -->
    <div class="slider-group">
      <div class="slider-header">
        <label>Lift:</label>
      </div>
      
      <div class="slider-container">
        <div class="slider-current-value" id="liftCurrentValue" style="left: 61%;">1550μs</div>
        
        <input type="range" 
               id="liftSlider" 
               class="minimal-slider"
               min="1000" 
               max="1900" 
               value="1550" 
               oninput="updateSliderValue('lift', this.value); setServoPWM('lift', this.value)">
        
        <div class="slider-labels">
          <span class="slider-label">Up</span>
          <span class="slider-label">Mid</span>
          <span class="slider-label">Down</span>
        </div>
      </div>
    </div>
    
    <!-- Tilt Servo Slider -->
    <div class="slider-group">
      <div class="slider-header">
        <label>Tilt:</label>
      </div>
      
      <div class="slider-container">
        <div class="slider-current-value" id="tiltCurrentValue" style="left: 44%;">1500μs</div>
        
        <input type="range" 
               id="tiltSlider" 
               class="minimal-slider"
               min="1300" 
               max="1750" 
               value="1500"
               oninput="updateSliderValue('tilt', this.value); setServoPWM('tilt', this.value)">
        
        <div class="slider-labels">
          <span class="slider-label">Down</span>
          <span class="slider-label">Flat</span>
          <span class="slider-label">Up</span>
        </div>
      </div>
    </div>
    
    <!-- Gripper Servo Slider -->
    <div class="slider-group">
      <div class="slider-header">
        <label>Gripper:</label>
      </div>
      
      <div class="slider-container">
        <div class="slider-current-value" id="gripperCurrentValue" style="left: 0%;">500μs</div>
        
        <input type="range" 
               id="gripperSlider" 
               class="minimal-slider"
               min="500" 
               max="2330" 
               value="500"
               oninput="updateSliderValue('gripper', this.value); setServoPWM('gripper', this.value)">
        
        <div class="slider-labels">
          <span class="slider-label">Open</span>
          <span class="slider-label">Semi</span>
          <span class="slider-label">Close</span>
        </div>
      </div>
    </div>
    
  </div>
</div>

<!-- Movement Controls -->
<div class="control-section">
  <div class="movement-control-area">
    
    <!-- Left Side: Speed + Direction Controls -->
    <div class="left-controls">
      <!-- Speed Controls -->
      <div class="speed-controls">
        <button id="slow-btn" class="speed-btn">Slow</button>
        <button id="moderate-btn" class="speed-btn">Moderate</button>
        <button id="fast-btn" class="speed-btn speed-active">Fast</button>
      </div>
      
      <!-- Direction Controls -->
      <div class="direction-controls">
        <div class="direction-row">
          <div></div>
          <button id="forward-btn" class="movement-btn">↑</button>
          <div></div>
        </div>
        <div class="direction-row">
          <button id="left-btn" class="movement-btn">←</button>
          <div></div>
          <button id="right-btn" class="movement-btn">→</button>
        </div>
        <div class="direction-row">
          <div></div>
          <button id="backward-btn" class="movement-btn">↓</button>
          <div></div>
        </div>
      </div>
    </div>
    
    <!-- Right Side: Joystick -->
    <div class="joystick-area">
      <div class="motor-display" id="motor-display">Motors: 0 0</div>
      <div id="joystick">
        <!-- Reference lines and circle -->
        <div class="joystick-guides">
          <div class="guide-line horizontal"></div>
          <div class="guide-line vertical"></div>
          <div class="guide-circle"></div>
        </div>
      </div>
    </div>
    
  </div>
</div>

<!-- Bottom Controls: LEDs & Play + Readings -->
<div class="bottom-controls">
  
  <!-- LED and Play Controls (Left) -->
  <div class="led-play-section">
    <div class="led-controls">
      <strong>LEDs:</strong>
      <input type="checkbox" id="led0" onchange="setLeds()">
      <input type="checkbox" id="led1" onchange="setLeds()">
      <input type="checkbox" id="led2" onchange="setLeds()">
    </div>
    
    <div class="play-controls">
      <input type="text" id="notes" maxlength="14" value="l16ceg>c">
      <button onclick="playNotes()">Play</button>
    </div>
  </div>
  
  <!-- Compact Readings (Right) -->
  <div class="readings-section">
    
    <div class="readings-row">
      <div class="reading-item">
        <strong>Buttons:</strong>
        <div class="reading-values">
          <span id="button0">0</span>
          <span id="button1">0</span>
          <span id="button2">0</span>
        </div>
      </div>
      
      <div class="reading-item">
        <strong>Battery:</strong>
        <span id="battery_millivolts">----</span>mV
      </div>
    </div>
    
    <div class="readings-row">
      <div class="reading-item">
        <strong>Analog:</strong>
        <div class="reading-values">
          <span id="analog0">0</span>
          <span id="analog1">0</span>
          <span id="analog2">0</span>
          <span id="analog3">0</span>
          <span id="analog4">0</span>
          <span id="analog5">0</span>
        </div>
      </div>
    </div>
    
    <div class="readings-row">
      <div class="reading-item">
        <strong>Encoders:</strong>
        <div class="reading-values">
          <span id="encoders0">0</span>
          <span id="encoders1">0</span>
        </div>
      </div>
      
      <div class="reading-item">
        <strong>Servo:</strong>
        P:<span id="servo-position">-</span> E:<span id="servo-enabled">-</span>
      </div>
    </div>
    
  </div>
  
</div>

</div>

</body>
</html>